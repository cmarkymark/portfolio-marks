<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Initial Start State | Aim #2: Mathematical Model</title>
  <meta name="description" content="This book contains the analyses for the mathematical model for Aim #2 of Charlie’s dissertation" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Initial Start State | Aim #2: Mathematical Model" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book contains the analyses for the mathematical model for Aim #2 of Charlie’s dissertation" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Initial Start State | Aim #2: Mathematical Model" />
  
  <meta name="twitter:description" content="This book contains the analyses for the mathematical model for Aim #2 of Charlie’s dissertation" />
  

<meta name="author" content="Charles Marks" />


<meta name="date" content="2021-04-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="paramset.html"/>
<link rel="next" href="ode.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> In This Book</a></li>
<li class="chapter" data-level="2" data-path="dataset.html"><a href="dataset.html"><i class="fa fa-check"></i><b>2</b> Generating the Initial Dataset</a>
<ul>
<li class="chapter" data-level="2.1" data-path="dataset.html"><a href="dataset.html#participants"><i class="fa fa-check"></i><b>2.1</b> Participants</a></li>
<li class="chapter" data-level="2.2" data-path="dataset.html"><a href="dataset.html#defining-variables-we-wish-to-capture"><i class="fa fa-check"></i><b>2.2</b> Defining Variables We Wish to Capture</a></li>
<li class="chapter" data-level="2.3" data-path="dataset.html"><a href="dataset.html#loading-the-necessary-datasets"><i class="fa fa-check"></i><b>2.3</b> Loading the Necessary Datasets</a></li>
<li class="chapter" data-level="2.4" data-path="dataset.html"><a href="dataset.html#iterating-through-the-datasets"><i class="fa fa-check"></i><b>2.4</b> Iterating Through the Datasets</a></li>
<li class="chapter" data-level="2.5" data-path="dataset.html"><a href="dataset.html#factoring-the-data"><i class="fa fa-check"></i><b>2.5</b> Factoring the Data</a></li>
<li class="chapter" data-level="2.6" data-path="dataset.html"><a href="dataset.html#adding-the-weights-and-replicate-weights-to-the-study"><i class="fa fa-check"></i><b>2.6</b> Adding the Weights and Replicate Weights to the Study</a></li>
<li class="chapter" data-level="2.7" data-path="dataset.html"><a href="dataset.html#save-the-data-frame-for-future-use"><i class="fa fa-check"></i><b>2.7</b> Save the Data Frame for Future Use</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="imputation.html"><a href="imputation.html"><i class="fa fa-check"></i><b>3</b> Data Imputation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="imputation.html"><a href="imputation.html#loading-libraries-and-the-data"><i class="fa fa-check"></i><b>3.1</b> Loading Libraries and the Data</a></li>
<li class="chapter" data-level="3.2" data-path="imputation.html"><a href="imputation.html#heuristic-imputation-of-income"><i class="fa fa-check"></i><b>3.2</b> Heuristic Imputation of Income</a></li>
<li class="chapter" data-level="3.3" data-path="imputation.html"><a href="imputation.html#heuristic-imputation-of-former-cige-cig-use"><i class="fa fa-check"></i><b>3.3</b> Heuristic Imputation of Former Cig/E-Cig Use</a></li>
<li class="chapter" data-level="3.4" data-path="imputation.html"><a href="imputation.html#imputation-with-mice"><i class="fa fa-check"></i><b>3.4</b> Imputation with <em>mice()</em></a></li>
<li class="chapter" data-level="3.5" data-path="imputation.html"><a href="imputation.html#generating-some-additional-variables"><i class="fa fa-check"></i><b>3.5</b> Generating Some Additional Variables</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="imputation.html"><a href="imputation.html#cateogry-cigarette-and-e-cigarette-use"><i class="fa fa-check"></i><b>3.5.1</b> 3-Cateogry Cigarette and E-Cigarette Use</a></li>
<li class="chapter" data-level="3.5.2" data-path="imputation.html"><a href="imputation.html#income-change-from-waves-1---2"><i class="fa fa-check"></i><b>3.5.2</b> Income Change from Waves 1 - 2</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="imputation.html"><a href="imputation.html#output-the-imputed-dataset"><i class="fa fa-check"></i><b>3.6</b> Output the Imputed Dataset</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="paramset.html"><a href="paramset.html"><i class="fa fa-check"></i><b>4</b> Generate Parameter Set</a>
<ul>
<li class="chapter" data-level="4.1" data-path="paramset.html"><a href="paramset.html#loading-necessary-packages-and-helper-functions"><i class="fa fa-check"></i><b>4.1</b> Loading Necessary Packages and Helper Functions</a></li>
<li class="chapter" data-level="4.2" data-path="paramset.html"><a href="paramset.html#set-some-hyperparamets-to-customize-parameter-set"><i class="fa fa-check"></i><b>4.2</b> Set Some Hyperparamets to Customize Parameter Set</a></li>
<li class="chapter" data-level="4.3" data-path="paramset.html"><a href="paramset.html#loading-our-dataset-and-defining-some-variables"><i class="fa fa-check"></i><b>4.3</b> Loading Our Dataset and Defining Some Variables</a></li>
<li class="chapter" data-level="4.4" data-path="paramset.html"><a href="paramset.html#defining-absolute-age-specific-income-transition-totals"><i class="fa fa-check"></i><b>4.4</b> Defining Absolute Age-Specific Income Transition Totals</a></li>
<li class="chapter" data-level="4.5" data-path="paramset.html"><a href="paramset.html#defining-cigarette-use-transitions"><i class="fa fa-check"></i><b>4.5</b> Defining Cigarette Use Transitions</a></li>
<li class="chapter" data-level="4.6" data-path="paramset.html"><a href="paramset.html#defining-e-cigarette-transitions"><i class="fa fa-check"></i><b>4.6</b> Defining E-Cigarette Transitions</a></li>
<li class="chapter" data-level="4.7" data-path="paramset.html"><a href="paramset.html#running-regression-analyses-to-extract-log-relative-risks"><i class="fa fa-check"></i><b>4.7</b> Running Regression Analyses to Extract Log-Relative Risks</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="paramset.html"><a href="paramset.html#defining-income-change-variable"><i class="fa fa-check"></i><b>4.7.1</b> Defining Income Change Variable</a></li>
<li class="chapter" data-level="4.7.2" data-path="paramset.html"><a href="paramset.html#cigarette-initiation-model"><i class="fa fa-check"></i><b>4.7.2</b> Cigarette Initiation Model</a></li>
<li class="chapter" data-level="4.7.3" data-path="paramset.html"><a href="paramset.html#cigarette-cessation-model"><i class="fa fa-check"></i><b>4.7.3</b> Cigarette Cessation Model</a></li>
<li class="chapter" data-level="4.7.4" data-path="paramset.html"><a href="paramset.html#cigarette-re-instatement-model"><i class="fa fa-check"></i><b>4.7.4</b> Cigarette Re-Instatement Model</a></li>
<li class="chapter" data-level="4.7.5" data-path="paramset.html"><a href="paramset.html#e-cigarette-initiation-model"><i class="fa fa-check"></i><b>4.7.5</b> E-Cigarette Initiation Model</a></li>
<li class="chapter" data-level="4.7.6" data-path="paramset.html"><a href="paramset.html#e-cigarette-cessation-model"><i class="fa fa-check"></i><b>4.7.6</b> E-Cigarette Cessation Model</a></li>
<li class="chapter" data-level="4.7.7" data-path="paramset.html"><a href="paramset.html#e-cigarette-reinstatement-model"><i class="fa fa-check"></i><b>4.7.7</b> E-Cigarette Reinstatement Model</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="paramset.html"><a href="paramset.html#drawing-our-parameter-set-samples"><i class="fa fa-check"></i><b>4.8</b> Drawing Our Parameter Set Samples</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="paramset.html"><a href="paramset.html#income-transitions-sample"><i class="fa fa-check"></i><b>4.8.1</b> Income Transitions Sample</a></li>
<li class="chapter" data-level="4.8.2" data-path="paramset.html"><a href="paramset.html#cigarette-transitions-sample"><i class="fa fa-check"></i><b>4.8.2</b> Cigarette Transitions Sample</a></li>
<li class="chapter" data-level="4.8.3" data-path="paramset.html"><a href="paramset.html#e-cigarette-transitions-sample"><i class="fa fa-check"></i><b>4.8.3</b> E-Cigarette Transitions Sample</a></li>
<li class="chapter" data-level="4.8.4" data-path="paramset.html"><a href="paramset.html#sampling-relative-risks"><i class="fa fa-check"></i><b>4.8.4</b> Sampling Relative Risks</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="paramset.html"><a href="paramset.html#generating-the-final-parameter-set-sampling"><i class="fa fa-check"></i><b>4.9</b> Generating the Final Parameter Set Sampling</a></li>
<li class="chapter" data-level="4.10" data-path="paramset.html"><a href="paramset.html#output-the-results"><i class="fa fa-check"></i><b>4.10</b> Output the Results</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>5</b> Initial Start State</a>
<ul>
<li class="chapter" data-level="5.1" data-path="start.html"><a href="start.html#stratifying-by-sex-and-age"><i class="fa fa-check"></i><b>5.1</b> Stratifying by Sex and Age</a></li>
<li class="chapter" data-level="5.2" data-path="start.html"><a href="start.html#stratifying-the-population-by-income-level"><i class="fa fa-check"></i><b>5.2</b> Stratifying the Population by Income Level</a></li>
<li class="chapter" data-level="5.3" data-path="start.html"><a href="start.html#distributing-cigarette-use"><i class="fa fa-check"></i><b>5.3</b> Distributing Cigarette Use</a></li>
<li class="chapter" data-level="5.4" data-path="start.html"><a href="start.html#distributing-e-cigarette-use"><i class="fa fa-check"></i><b>5.4</b> Distributing E-Cigarette Use</a></li>
<li class="chapter" data-level="5.5" data-path="start.html"><a href="start.html#saving-the-states"><i class="fa fa-check"></i><b>5.5</b> Saving the States</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ode.html"><a href="ode.html"><i class="fa fa-check"></i><b>6</b> ODE Functions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ode.html"><a href="ode.html#ode-function"><i class="fa fa-check"></i><b>6.1</b> ODE Function</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="calibration.html"><a href="calibration.html"><i class="fa fa-check"></i><b>7</b> Calibration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="calibration.html"><a href="calibration.html#load-the-necessary-libraries"><i class="fa fa-check"></i><b>7.1</b> Load the Necessary Libraries</a></li>
<li class="chapter" data-level="7.2" data-path="calibration.html"><a href="calibration.html#define-our-calibration-function"><i class="fa fa-check"></i><b>7.2</b> Define Our Calibration Function</a></li>
<li class="chapter" data-level="7.3" data-path="calibration.html"><a href="calibration.html#run-the-calibration"><i class="fa fa-check"></i><b>7.3</b> Run the Calibration</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ref.html"><a href="ref.html"><i class="fa fa-check"></i><b>8</b> Run Primary Model and Income Scenario Analysis</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ref.html"><a href="ref.html#run-primary-model"><i class="fa fa-check"></i><b>8.1</b> Run Primary Model</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ref.html"><a href="ref.html#load-the-needed-libraries-and-functions"><i class="fa fa-check"></i><b>8.1.1</b> Load the Needed Libraries and Functions</a></li>
<li class="chapter" data-level="8.1.2" data-path="ref.html"><a href="ref.html#initialize-the-start-state-and-entry-object"><i class="fa fa-check"></i><b>8.1.2</b> Initialize the Start State and Entry Object</a></li>
<li class="chapter" data-level="8.1.3" data-path="ref.html"><a href="ref.html#load-appropraite-parameters"><i class="fa fa-check"></i><b>8.1.3</b> Load Appropraite Parameters</a></li>
<li class="chapter" data-level="8.1.4" data-path="ref.html"><a href="ref.html#actually-run-the-model"><i class="fa fa-check"></i><b>8.1.4</b> Actually Run the Model</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ref.html"><a href="ref.html#run-high-income-scenario-analysis"><i class="fa fa-check"></i><b>8.2</b> Run High-Income Scenario Analysis</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>9</b> Results</a>
<ul>
<li class="chapter" data-level="9.1" data-path="results.html"><a href="results.html#calibration-confirmation"><i class="fa fa-check"></i><b>9.1</b> Calibration Confirmation</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="results.html"><a href="results.html#population-growth"><i class="fa fa-check"></i><b>9.1.1</b> Population Growth</a></li>
<li class="chapter" data-level="9.1.2" data-path="results.html"><a href="results.html#current-cigarette-use"><i class="fa fa-check"></i><b>9.1.2</b> Current Cigarette Use</a></li>
<li class="chapter" data-level="9.1.3" data-path="results.html"><a href="results.html#former-cigarette-use"><i class="fa fa-check"></i><b>9.1.3</b> Former Cigarette Use</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="results.html"><a href="results.html#scenario-analysis-results"><i class="fa fa-check"></i><b>9.2</b> Scenario Analysis Results</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="results.html"><a href="results.html#cigarette-prevalence"><i class="fa fa-check"></i><b>9.2.1</b> Cigarette Prevalence</a></li>
<li class="chapter" data-level="9.2.2" data-path="results.html"><a href="results.html#population-attributable-fraction"><i class="fa fa-check"></i><b>9.2.2</b> Population Attributable Fraction</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Aim #2: Mathematical Model</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="start" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Initial Start State</h1>
<p>We need to initialize our model to be representative of the US population. While the PATH study is designed to be representative, it is not weighted to ensure the correct proporiton of former smokers and the correct income distribution is represented. In other words, the PATH dataset over-samples former smokers (under samples never smokers) and the weighting does not effectively account for this.</p>
<p>Therefore to get our starting state, we need to generate a reasonable population distribution such that our model is simulating the adult US population. Note, this model is initialized to the year 2014.</p>
<div id="stratifying-by-sex-and-age" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Stratifying by Sex and Age</h2>
<p><a href="https://www.census.gov/data/tables/2014/demo/age-and-sex/2014-age-sex-composition.html" class="uri">https://www.census.gov/data/tables/2014/demo/age-and-sex/2014-age-sex-composition.html</a></p>
<p>We can start by stratifying the population by sex and age. Table 1 at the link above provides us the data that we need to get these breakdowns. Analyzing the data, we see that the adult population in the US 2014 can be broken down as:</p>
<ul>
<li>18-24 Year Old
<ul>
<li>Male: 6.4%</li>
<li>Female: 6.2%</li>
</ul></li>
<li>25-34
<ul>
<li>Male: 8.9%</li>
<li>Female: 8.9%</li>
</ul></li>
<li>35-44
<ul>
<li>Male: 8.2%</li>
<li>Female: 8.4%</li>
</ul></li>
<li>45-54
<ul>
<li>Male: 8.8%</li>
<li>Female: 9.2%</li>
</ul></li>
<li>55-64
<ul>
<li>Male: 7.9%</li>
<li>Female: 8.6%</li>
</ul></li>
<li>65+
<ul>
<li>Male: 8.2%</li>
<li>Female: 10.3%</li>
</ul></li>
</ul>
<p>Overall, this results in a population that is 51.6% female.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="start.html#cb34-1" aria-hidden="true" tabindex="-1"></a>toArray <span class="ot">&lt;-</span> <span class="cf">function</span>(vector, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">13</span>)){</span>
<span id="cb34-2"><a href="start.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-3"><a href="start.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  array_structure <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">dim =</span> dim)</span>
<span id="cb34-4"><a href="start.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-5"><a href="start.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">replace</span>(array_structure, <span class="cn">TRUE</span>, vector))</span>
<span id="cb34-6"><a href="start.html#cb34-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-7"><a href="start.html#cb34-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-8"><a href="start.html#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="start.html#cb34-9" aria-hidden="true" tabindex="-1"></a>male_by_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.064</span>, <span class="fl">0.089</span>, <span class="fl">0.082</span>, <span class="fl">0.088</span>, <span class="fl">0.079</span>, <span class="fl">0.082</span>)</span>
<span id="cb34-10"><a href="start.html#cb34-10" aria-hidden="true" tabindex="-1"></a>female_by_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.062</span>, <span class="fl">0.089</span>,<span class="fl">0.084</span>,<span class="fl">0.092</span>,<span class="fl">0.086</span>,<span class="fl">0.103</span>)</span>
<span id="cb34-11"><a href="start.html#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="start.html#cb34-12" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">toArray</span>(<span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">12</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">6</span>))</span>
<span id="cb34-13"><a href="start.html#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="start.html#cb34-14" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,] <span class="ot">&lt;-</span> male_by_age</span>
<span id="cb34-15"><a href="start.html#cb34-15" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,] <span class="ot">&lt;-</span> female_by_age</span></code></pre></div>
</div>
<div id="stratifying-the-population-by-income-level" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Stratifying the Population by Income Level</h2>
<p><a href="https://www.census.gov/data/tables/time-series/demo/income-poverty/cps-hinc/hinc-01.2014.html" class="uri">https://www.census.gov/data/tables/time-series/demo/income-poverty/cps-hinc/hinc-01.2014.html</a></p>
<p>By multiplying the distribution of household income by the average number of people in household of given income, we are able to estimate the distribution of income by person. Using data (link above) from 2014 Census table HINC-01, we are able to estimate the following income distribution:</p>
<ul>
<li>&lt;$10k: 5%</li>
<li>$10-25k: 12%</li>
<li>$25-50k: 21%</li>
<li>$50-100k: 31%</li>
<li>+$100k: 31%</li>
</ul>
<p>While income distributions are likely heterogenous across age group, household income is more complicated to capture than personal income. For example, an 19 year old in college might make 0 money and be in the &gt;$100k group. Similarly, a working 19 year old with no parental support may fall in the 10-25k range even though they are actually netting more personal income.</p>
<p>Given challenges in figuring out differential income across age and sex, we have opted to assume a homogenous income distribution across age and sex.</p>
<p>As well, our model has 13 income brackets because our model tries to capture the impact of income level changes. We initialize our start state with everyone in one of the 5 income stable groups.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="start.html#cb35-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> states</span>
<span id="cb35-2"><a href="start.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="start.html#cb35-3" aria-hidden="true" tabindex="-1"></a>income_dist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.12</span>,<span class="fl">0.21</span>,<span class="fl">0.31</span>,<span class="fl">0.31</span>)</span>
<span id="cb35-4"><a href="start.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="start.html#cb35-5" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">toArray</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">156</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">13</span>))</span>
<span id="cb35-6"><a href="start.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="start.html#cb35-7" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,,<span class="dv">1</span>] <span class="ot">&lt;-</span> temp[<span class="dv">1</span>,]<span class="sc">*</span>income_dist[<span class="dv">1</span>]</span>
<span id="cb35-8"><a href="start.html#cb35-8" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,,<span class="dv">2</span>] <span class="ot">&lt;-</span> temp[<span class="dv">1</span>,]<span class="sc">*</span>income_dist[<span class="dv">2</span>]</span>
<span id="cb35-9"><a href="start.html#cb35-9" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,,<span class="dv">3</span>] <span class="ot">&lt;-</span> temp[<span class="dv">1</span>,]<span class="sc">*</span>income_dist[<span class="dv">3</span>]</span>
<span id="cb35-10"><a href="start.html#cb35-10" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,,<span class="dv">4</span>] <span class="ot">&lt;-</span> temp[<span class="dv">1</span>,]<span class="sc">*</span>income_dist[<span class="dv">4</span>]</span>
<span id="cb35-11"><a href="start.html#cb35-11" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">1</span>,,<span class="dv">5</span>] <span class="ot">&lt;-</span> temp[<span class="dv">1</span>,]<span class="sc">*</span>income_dist[<span class="dv">5</span>]</span>
<span id="cb35-12"><a href="start.html#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="start.html#cb35-13" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,,<span class="dv">1</span>] <span class="ot">&lt;-</span> temp[<span class="dv">2</span>,]<span class="sc">*</span>income_dist[<span class="dv">1</span>]</span>
<span id="cb35-14"><a href="start.html#cb35-14" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,,<span class="dv">2</span>] <span class="ot">&lt;-</span> temp[<span class="dv">2</span>,]<span class="sc">*</span>income_dist[<span class="dv">2</span>]</span>
<span id="cb35-15"><a href="start.html#cb35-15" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,,<span class="dv">3</span>] <span class="ot">&lt;-</span> temp[<span class="dv">2</span>,]<span class="sc">*</span>income_dist[<span class="dv">3</span>]</span>
<span id="cb35-16"><a href="start.html#cb35-16" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,,<span class="dv">4</span>] <span class="ot">&lt;-</span> temp[<span class="dv">2</span>,]<span class="sc">*</span>income_dist[<span class="dv">4</span>]</span>
<span id="cb35-17"><a href="start.html#cb35-17" aria-hidden="true" tabindex="-1"></a>states[<span class="dv">2</span>,,<span class="dv">5</span>] <span class="ot">&lt;-</span> temp[<span class="dv">2</span>,]<span class="sc">*</span>income_dist[<span class="dv">5</span>]</span></code></pre></div>
</div>
<div id="distributing-cigarette-use" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Distributing Cigarette Use</h2>
<p>To initialize our starting cigarette levels, we will use CDC data.</p>
<p><a href="https://www.cdc.gov/mmwr/volumes/65/wr/mm6527a1.htm" class="uri">https://www.cdc.gov/mmwr/volumes/65/wr/mm6527a1.htm</a></p>
<p>They estimate that in 2013-4, 17% of the population smoked cigarettes. 19.3% of males were current smokers and 15.7% of females were current smokers. This work, however, does not provide the same income distribution. Next they present the smoking prevalence by age, with 17% of those 18-24 smoking, 21.4% of those 25-44, 17.8% of those 45-64, and 7.9% of those 65+.</p>
<p>The breakdown by income is not by the same categories and they report:</p>
<ul>
<li>&lt;$20k: 28.7% (27.1 - 30.4)</li>
<li>20-50k: 21.7% (20.8 - 22.6)</li>
<li>50-100k: 14.1% (13.4 - 14.9)</li>
<li>+100k: 8.0% (7.3 - 8.7)</li>
<li>Unspecified: 17.2% (16.4 - 18.1)</li>
</ul>
<p>However, we need to realign to match up with &lt;10k, 10-25, 25-50k. And we need these values to correspond with a 17% smoking prevalence. Given the dose response relationship, we hypothesize that the &lt;10k reasonably would have the highest proportion of cigarette use. Using the CDC prevalences, with a higher prevalence for &lt;$10k, results in a sample current smoking of 17%.</p>
<ul>
<li>&lt;$10k: 32.0%</li>
<li>10-25k: 28.7%</li>
<li>25-50k: 21.7%</li>
<li>50-100k: 14.1%</li>
<li>+100k: 8.0%</li>
</ul>
<p>For current cigarette smoking, CDC reports 21.9% of the population in 2014 was a former smoker, though determining income breakdown is challenging. We make the following assumptions in defining the number of former smokers:</p>
<ol style="list-style-type: decimal">
<li>that more men than women are former smokers because more men than women smoke</li>
<li>that older age is has higher prevalence of cigarette smoking</li>
<li>that higher incomes have higher prevalence of former smoking</li>
</ol>
<p>Further, a recent study (2018, <a href="https://www.cdc.gov/nchs/data/nhsr/nhsr145-508.pdf" class="uri">https://www.cdc.gov/nchs/data/nhsr/nhsr145-508.pdf</a>) estimated that for men over 65, 49.4% were former smokers and for women over 65, 30.6% were smokers. We assume slighlty diminished totals in 2014 (44% and 25%) and use these as baselines which we adjust based on age and income.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="start.html#cb36-1" aria-hidden="true" tabindex="-1"></a>cig_by_sex <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">193</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">157</span><span class="sc">/</span>.<span class="dv">17</span>) <span class="do">## This is amultiplier, in which men are more likely than women to be smokers</span></span>
<span id="cb36-2"><a href="start.html#cb36-2" aria-hidden="true" tabindex="-1"></a>cig_by_age <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">17</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">214</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">214</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">178</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">178</span><span class="sc">/</span>.<span class="dv">17</span>,.<span class="dv">079</span><span class="sc">/</span>.<span class="dv">17</span>) <span class="do">## multiplier for age </span></span>
<span id="cb36-3"><a href="start.html#cb36-3" aria-hidden="true" tabindex="-1"></a>cig_by_income <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">32</span>,.<span class="dv">287</span>,.<span class="dv">217</span>,.<span class="dv">141</span>,.<span class="dv">08</span>) <span class="do">## Then we use the proportion across income</span></span>
<span id="cb36-4"><a href="start.html#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="start.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#former_smoke_baseline &lt;- 0.209 ## Chosen to ensure we get the appropriate final distribution</span></span>
<span id="cb36-6"><a href="start.html#cb36-6" aria-hidden="true" tabindex="-1"></a>former_by_sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.46</span>,.<span class="dv">27</span>) <span class="do">## largely matches the cig_by_sex object</span></span>
<span id="cb36-7"><a href="start.html#cb36-7" aria-hidden="true" tabindex="-1"></a>former_by_age <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">3</span>,.<span class="dv">4</span>,.<span class="dv">5</span>,.<span class="dv">6</span>,.<span class="dv">8</span>,<span class="dv">1</span>) <span class="do">## we assume this relationship isn&#39;t linear</span></span>
<span id="cb36-8"><a href="start.html#cb36-8" aria-hidden="true" tabindex="-1"></a>former_by_income <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">6</span>, .<span class="dv">8</span>,<span class="dv">1</span>,<span class="fl">1.2</span>) <span class="do">## consistent with literature about the association of income and cessation rates</span></span>
<span id="cb36-9"><a href="start.html#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="start.html#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="start.html#cb36-11" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> states</span>
<span id="cb36-12"><a href="start.html#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="start.html#cb36-13" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">toArray</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">156</span><span class="sc">*</span><span class="dv">3</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">13</span>))</span>
<span id="cb36-14"><a href="start.html#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="start.html#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(sex <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)){</span>
<span id="cb36-16"><a href="start.html#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(age <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb36-17"><a href="start.html#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(income <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb36-18"><a href="start.html#cb36-18" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-19"><a href="start.html#cb36-19" aria-hidden="true" tabindex="-1"></a>      cell_total <span class="ot">&lt;-</span> temp[sex,age,income]</span>
<span id="cb36-20"><a href="start.html#cb36-20" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-21"><a href="start.html#cb36-21" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-22"><a href="start.html#cb36-22" aria-hidden="true" tabindex="-1"></a>      current_cig <span class="ot">&lt;-</span> cell_total<span class="sc">*</span>cig_by_sex[sex]<span class="sc">*</span>cig_by_age[age]<span class="sc">*</span>cig_by_income[income]</span>
<span id="cb36-23"><a href="start.html#cb36-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-24"><a href="start.html#cb36-24" aria-hidden="true" tabindex="-1"></a>      former_cig <span class="ot">&lt;-</span> cell_total<span class="sc">*</span>former_by_sex[sex]<span class="sc">*</span>former_by_age[age]<span class="sc">*</span>former_by_income[income]</span>
<span id="cb36-25"><a href="start.html#cb36-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-26"><a href="start.html#cb36-26" aria-hidden="true" tabindex="-1"></a>      states[sex,age,<span class="dv">3</span>,income] <span class="ot">&lt;-</span> former_cig</span>
<span id="cb36-27"><a href="start.html#cb36-27" aria-hidden="true" tabindex="-1"></a>      states[sex,age,<span class="dv">2</span>,income] <span class="ot">&lt;-</span> current_cig</span>
<span id="cb36-28"><a href="start.html#cb36-28" aria-hidden="true" tabindex="-1"></a>      states[sex,age,<span class="dv">1</span>,income] <span class="ot">&lt;-</span> cell_total <span class="sc">-</span> current_cig <span class="sc">-</span> former_cig</span>
<span id="cb36-29"><a href="start.html#cb36-29" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-30"><a href="start.html#cb36-30" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb36-31"><a href="start.html#cb36-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb36-32"><a href="start.html#cb36-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-33"><a href="start.html#cb36-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="distributing-e-cigarette-use" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Distributing E-Cigarette Use</h2>
<p>Finally, we need to distribute e-cigarette use. In 2014, CDC estimates indicate that 3.3% of the population used e-cigarettes:</p>
<ul>
<li>4% of Males</li>
<li>2.8% of Females</li>
<li>Young People Much Higher Rates
<ul>
<li>18-24: 5.5%</li>
<li>25-44: 4.4%</li>
<li>45-64: 2.8%</li>
<li>65+: 0.9%</li>
</ul></li>
<li>Income Dynamics Not as Pronounced
<ul>
<li>&lt;20k: 4%</li>
<li>20-50k: 4.2%</li>
<li>50-100k: 3.3%</li>
<li>+100k: 2.3%</li>
</ul></li>
</ul>
<p>CDC MMWR Report (<a href="https://www.cdc.gov/mmwr/volumes/65/wr/mm6542a7.htm" class="uri">https://www.cdc.gov/mmwr/volumes/65/wr/mm6542a7.htm</a>) shows that:</p>
<ul>
<li>58.5% of e-cigarette users were cigarette smokers</li>
<li>29.8% were former smokers</li>
<li>11.4% were never smokers</li>
<li>98.7% of those &gt;45 were current or former cigarette smokers</li>
<li>60% of those 18-24 were current or former cigarette smokers</li>
</ul>
<p>Full breakdown by age:</p>
<ul>
<li>18 - 24:
<ul>
<li>42% current cigarette</li>
<li>18% former cigarette</li>
<li>40% never cigarette</li>
</ul></li>
<li>25 - 44:
<ul>
<li>59% current cigarette</li>
<li>31% former cigarette</li>
<li>10% never cigarette</li>
</ul></li>
<li>45+
<ul>
<li>67% current</li>
<li>32% former</li>
<li>1% never</li>
</ul></li>
</ul>
<p>We will use these values to distribute e-cigarette use across the compartments. Further, we will assume an equal number of former e-cigarette users for each sex,age,income,cigarette use combo given challenges in estimating this</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="start.html#cb37-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> states</span>
<span id="cb37-2"><a href="start.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="start.html#cb37-3" aria-hidden="true" tabindex="-1"></a>ecig_sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.04</span>, <span class="fl">0.028</span>)</span>
<span id="cb37-4"><a href="start.html#cb37-4" aria-hidden="true" tabindex="-1"></a>ecig_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.055</span>,<span class="fl">0.044</span>,<span class="fl">0.044</span>,<span class="fl">0.028</span>,<span class="fl">0.028</span>,<span class="fl">0.009</span>)<span class="sc">/</span>.<span class="dv">033</span></span>
<span id="cb37-5"><a href="start.html#cb37-5" aria-hidden="true" tabindex="-1"></a>ecig_income <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.05</span>,<span class="fl">0.045</span>,<span class="fl">0.042</span>,<span class="fl">0.033</span>,<span class="fl">0.023</span>)<span class="sc">/</span>.<span class="dv">033</span></span>
<span id="cb37-6"><a href="start.html#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="start.html#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="start.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb37-9"><a href="start.html#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="do">## This is the proportion of e-smokers who are cigarette users</span></span>
<span id="cb37-10"><a href="start.html#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="do">## We need the proportion of cigarette smokers who are e_cig users</span></span>
<span id="cb37-11"><a href="start.html#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="start.html#cb37-12" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">toArray</span>(<span class="dv">0</span>)</span>
<span id="cb37-13"><a href="start.html#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="start.html#cb37-14" aria-hidden="true" tabindex="-1"></a>age_cig_effect <span class="ot">&lt;-</span> <span class="fu">toArray</span>(<span class="dv">0</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>))</span>
<span id="cb37-15"><a href="start.html#cb37-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-16"><a href="start.html#cb37-16" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">1</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">4</span>,.<span class="dv">42</span>,.<span class="dv">18</span>)</span>
<span id="cb37-17"><a href="start.html#cb37-17" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">2</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">59</span>,.<span class="dv">31</span>)</span>
<span id="cb37-18"><a href="start.html#cb37-18" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">3</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">59</span>,.<span class="dv">31</span>)</span>
<span id="cb37-19"><a href="start.html#cb37-19" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">4</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">01</span>,.<span class="dv">67</span>,.<span class="dv">32</span>)</span>
<span id="cb37-20"><a href="start.html#cb37-20" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">5</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">01</span>,.<span class="dv">67</span>,.<span class="dv">32</span>)</span>
<span id="cb37-21"><a href="start.html#cb37-21" aria-hidden="true" tabindex="-1"></a>age_cig_effect[<span class="dv">6</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">01</span>,.<span class="dv">67</span>,.<span class="dv">32</span>)</span>
<span id="cb37-22"><a href="start.html#cb37-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-23"><a href="start.html#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb37-24"><a href="start.html#cb37-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Ok so the values currently saved in age_cig_effect</span></span>
<span id="cb37-25"><a href="start.html#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="do">## are the proportion of e_cig users who also use cigs</span></span>
<span id="cb37-26"><a href="start.html#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="do">## but we want the proportion of people at each cig level who are also e-cig users</span></span>
<span id="cb37-27"><a href="start.html#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="do">## so we use the proportions available to use </span></span>
<span id="cb37-28"><a href="start.html#cb37-28" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb37-29"><a href="start.html#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="do">## to get what we want we let x = the % of e-cig at cig level c and age a</span></span>
<span id="cb37-30"><a href="start.html#cb37-30" aria-hidden="true" tabindex="-1"></a><span class="do">## we let y  = % of people who use e-cigs at age a</span></span>
<span id="cb37-31"><a href="start.html#cb37-31" aria-hidden="true" tabindex="-1"></a><span class="do">## and we let z = % of people at cig level c</span></span>
<span id="cb37-32"><a href="start.html#cb37-32" aria-hidden="true" tabindex="-1"></a><span class="do">## we then can get our value by calculated x*y/z</span></span>
<span id="cb37-33"><a href="start.html#cb37-33" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb37-34"><a href="start.html#cb37-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-35"><a href="start.html#cb37-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-36"><a href="start.html#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(age <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb37-37"><a href="start.html#cb37-37" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(cig <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb37-38"><a href="start.html#cb37-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-39"><a href="start.html#cb37-39" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> ecig_age[age]<span class="sc">*</span>.<span class="dv">033</span></span>
<span id="cb37-40"><a href="start.html#cb37-40" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">c</span>(temp[,age,cig,]))<span class="sc">/</span><span class="fu">sum</span>(<span class="fu">c</span>(temp[,age,,]))</span>
<span id="cb37-41"><a href="start.html#cb37-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-42"><a href="start.html#cb37-42" aria-hidden="true" tabindex="-1"></a>    age_cig_effect[age,cig] <span class="ot">&lt;-</span> age_cig_effect[age,cig]<span class="sc">*</span>y<span class="sc">/</span>z</span>
<span id="cb37-43"><a href="start.html#cb37-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-44"><a href="start.html#cb37-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-45"><a href="start.html#cb37-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-46"><a href="start.html#cb37-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-47"><a href="start.html#cb37-47" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(sex <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>){</span>
<span id="cb37-48"><a href="start.html#cb37-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(age <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb37-49"><a href="start.html#cb37-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(income <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb37-50"><a href="start.html#cb37-50" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(cig <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb37-51"><a href="start.html#cb37-51" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-52"><a href="start.html#cb37-52" aria-hidden="true" tabindex="-1"></a>        cell_total <span class="ot">&lt;-</span> temp[sex,age,cig,income]</span>
<span id="cb37-53"><a href="start.html#cb37-53" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-54"><a href="start.html#cb37-54" aria-hidden="true" tabindex="-1"></a>        e_cig <span class="ot">&lt;-</span> cell_total<span class="sc">*</span>age_cig_effect[age,cig]</span>
<span id="cb37-55"><a href="start.html#cb37-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-56"><a href="start.html#cb37-56" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-57"><a href="start.html#cb37-57" aria-hidden="true" tabindex="-1"></a>        former_ecig <span class="ot">&lt;-</span> e_cig</span>
<span id="cb37-58"><a href="start.html#cb37-58" aria-hidden="true" tabindex="-1"></a>        never_ecig <span class="ot">&lt;-</span>  cell_total <span class="sc">-</span> e_cig <span class="sc">-</span> former_ecig</span>
<span id="cb37-59"><a href="start.html#cb37-59" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-60"><a href="start.html#cb37-60" aria-hidden="true" tabindex="-1"></a>        states[sex,age,cig,<span class="dv">1</span>,income] <span class="ot">&lt;-</span> never_ecig</span>
<span id="cb37-61"><a href="start.html#cb37-61" aria-hidden="true" tabindex="-1"></a>        states[sex,age,cig,<span class="dv">2</span>,income] <span class="ot">&lt;-</span> e_cig</span>
<span id="cb37-62"><a href="start.html#cb37-62" aria-hidden="true" tabindex="-1"></a>        states[sex,age,cig,<span class="dv">3</span>,income] <span class="ot">&lt;-</span> former_ecig</span>
<span id="cb37-63"><a href="start.html#cb37-63" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-64"><a href="start.html#cb37-64" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-65"><a href="start.html#cb37-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-66"><a href="start.html#cb37-66" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb37-67"><a href="start.html#cb37-67" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb37-68"><a href="start.html#cb37-68" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-69"><a href="start.html#cb37-69" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-70"><a href="start.html#cb37-70" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="saving-the-states" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Saving the States</h2>
<p>Finally, we want to save the states for future use. We will save it in a data.frame where the only column is the vector of states.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="start.html#cb38-1" aria-hidden="true" tabindex="-1"></a>states <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">toVector</span>(states))</span>
<span id="cb38-2"><a href="start.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(states,<span class="st">&quot;Data/Initial_State.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="paramset.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ode.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
